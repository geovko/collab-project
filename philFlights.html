<html>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
<body>
<title>FlightsBackend</title>
<header>Testing Testing...</header>
<p>Hiya! Check the console.</P>
</body>
<script>
const flightType = 'ONE_WAY';
    // ONE_WAY ROUND_TRIP
const flightClass = 'ECO';
    // ECO BUS PEC FST
const arrivalLoc = 'NYC';
const departLoc = 'LON';
const departDate = '2024-10-02';
const returnDate = '2024-10-03';
const passengers = '1';
const searchList = 10;

const settings = {
	async: true,
	crossDomain: true,
	url: `https://priceline-com-provider.p.rapidapi.com/v1/flights/search?itinerary_type=${flightType}&class_type=${flightClass}&location_arrival=${arrivalLoc}&location_departure=${departLoc}&date_departure=${departDate}&sort_order=PRICE&date_departure_return=${returnDate}&number_of_passengers=${passengers}&price_min=100&price_max=20000`,
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': 'dba5bf0dd6msh430f1928362915fp11ae10jsnb87b31f34026',
		'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com'
	}
};

$.ajax(settings).done(function (response) {
	console.log(response);
    console.log(`For a ${flightType} flight with ${flightClass} class`);
    console.log(`Heading to ${arrivalLoc} from ${departLoc}`);
    console.log(`Leaving on ${departDate} and returning back ${returnDate}`);
    console.log(`Total Amount of Passengers: ${passengers}`);
    for (i=0; i<searchList; i++) {
        console.log(` Flight Number: ${response.data.listings[i].slices[0].segments[0].flightNumber}`);
        console.log(` Airline: ${response.data.listings[i].airlines[0].name}`);
        console.log(` Price: ${response.data.listings[i].totalPriceWithDecimal.price}`);
        console.log('......');
        console.log(` Departure Info: ${response.data.listings[i].slices[0].segments[0].departInfo.airport.name}`);
        console.log(` Departure Time: ${response.data.listings[i].slices[0].segments[0].departInfo.time.dateTime}`);

        console.log(` Arrival Info: ${response.data.listings[i].slices[0].segments[0].arrivalInfo.airport.name}`);
        console.log(` Arrival Time: ${response.data.listings[i].slices[0].segments[0].arrivalInfo.time.dateTime}`);
        console.log('========================');
    }
});
</script>
</html>
